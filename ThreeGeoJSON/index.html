<html>
    <head>
        <title>ThreeGeoJSON Demo</title>

        <script src="lib/threeGeoJSON.js"></script>

        <!-- Three.js library, movement controls, and jquery for the geojson-->
        <script src="lib/three.min.js"></script>
        <script src="lib/TrackballControls.js"></script>
        <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    </head>
    <body>
        <style>
            html, body {
                padding: 0;
                margin: 0;
                overflow: hidden;
            }
        </style>
		<script type="module">
            //New scene and camera
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.5, 1000);

            //New Renderer
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            var planet = new THREE.Object3D();
  
            //Create a sphere to make visualization easier.
            var geometry = new THREE.SphereGeometry(30, 45, 45);
            var material = new THREE.MeshPhongMaterial({
                map:         THREE.ImageUtils.loadTexture("images/earthmap1k.jpg"),
                bumpMap:     THREE.ImageUtils.loadTexture('images/earthbump1k.jpg'),
                bumpScale:   3.5,
                specularMap: THREE.ImageUtils.loadTexture('images/earthspec1k.jpg'),
                specular:    new THREE.Color('grey')
            });
            var sphere = new THREE.Mesh(geometry, material);
            sphere.rotation.x += 1.58;
            planet.add(sphere);

            scene.add(planet);
            var light = new THREE.DirectionalLight( 0xcccccc, 0.5);
            light.position.set(10, 20, 10);
            scene.add(light);

            const color = 0xffffff;
            var lightBack = new THREE.AmbientLight(color);
            lightBack.position.set(-2, 2, 10);
            scene.add(lightBack);

            //Draw the GeoJSON
            $.getJSON("test_geojson/countries.json", function(data) {
                drawThreeGeo(data, 30, 'sphere', {
                    color: 'red'
                }, planet);
            });

            $.getJSON("test_geojson/points.json", function(data) {
                drawThreeGeo(data, 30.3, 'sphere', {
                    color: 'red'
                }, planet);
            });
            //Set the camera position
            camera.position.z = 8
            camera.position.y = 19;
            camera.position.x = 59;

            planet.rotation.x += -1.55;
            planet.rotation.z += -0.4;
            //Enable controls
            var controls = new THREE.TrackballControls(camera);

            //Render the image
            function render() {
                controls.update();
                requestAnimationFrame(render);
                renderer.render(scene, camera);
            }
            document.addEventListener("keypress", function(){
                alert("Y" + camera.position.y);
                alert("X" + camera.position.x);
                alert("Z" + camera.position.z);
            });
            render();
        </script>
	</body>
</html>
